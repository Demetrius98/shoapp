<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{default}">
    <head>
        <title>Dashboard</title>

        <!-- https://cdnjs.com/libraries/sockjs-client -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js"></script>
        <!-- https://cdnjs.com/libraries/stomp.js/ -->
        <script  src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

        <link rel="stylesheet" href="/css/main.css" />

    </head>
    <body>
        <div layout:fragment="content" >
            <!--<h1 th:inline="text">Hello [[${#httpServletRequest.remoteUser}]]!</h1>-->
           <!-- <h2 th:inline="text">You are [[${fullName}]] </h2> -->
            <a1 th:inline="text">You have authorized as [[${fullName}]]!</a1>
            <a2 th:inline="text">Select user to start chatting</a2>

        <table>
            <thead>
            <tr>
                <th> Send message to: </th>
                <!--<th> email </th> -->
            </tr>
            </thead>
            <tbody>
            <!--<tr th:if="${listOfUsers.empty}">
                <td colspan="2"> No users Available </td>
            </tr>-->
            <tr th:each="listOfUser : ${listOfUsers}">
                <td>
                    <a th:href="@{'/dashboard?email=' + ${listOfUser.getEmail()}}">
                        <span th:text="${listOfUser.fullname}">
                            fullname
                        </span>
                    </a>
                </td>
                <!--<td><span th:text="${listOfUser.email}"> email </span></td> -->
            </tr>
            </tbody>
        </table>

            <!-- <h3 th:inline="text">SendTo [[${emailTo}]] </h3> -->
            <div id="chat-container">
                <div class="chat-header">
                    <div class="user-container">
                        <span id="usernameTo" th:utext="${usernameTo}" ></span>
                       <!-- <a th:href="@{/logout}">Logout</a> -->
                    </div>
                    <h2 th:inline="text">Chat room</h2>
                </div>

                <hr/>

                <div id="connecting">Connecting...</div>
                <ul id="messageArea">
                </ul>
                <form id="messageForm" name="messageForm">
                    <div class="input-message">
                        <input type="text" id="message" autocomplete="off"
                               placeholder="Type a message..."/>
                        <button type="submit">Send</button>
                    </div>
                </form>

            </div>



            <script th:src="@{/main.js}"></script>

        </div>


    </body>
</html>